<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Race to Riches - Choose Your Era</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Orbitron', sans-serif;
            background: #000;
            color: #fff;
            overflow: hidden;
            height: 100vh;
            width: 100vw;
            position: relative;
        }

        /* Ethereal background with stars and nebula effect */
        .space-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(ellipse at bottom, #1B2735 0%, #090A0F 100%);
            overflow: hidden;
            z-index: -2;
        }

        .stars {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }

        .star {
            position: absolute;
            background-color: #fff;
            border-radius: 50%;
            animation: twinkle 5s infinite;
        }

        .nebula {
            position: absolute;
            width: 100%;
            height: 100%;
            background:
                radial-gradient(circle at 20% 30%, rgba(128, 0, 128, 0.2) 0%, transparent 40%),
                radial-gradient(circle at 80% 70%, rgba(0, 128, 128, 0.2) 0%, transparent 40%),
                radial-gradient(circle at 50% 50%, rgba(0, 0, 255, 0.1) 0%, transparent 60%);
            filter: blur(20px);
            z-index: -1;
        }

        @keyframes twinkle {

            0%,
            100% {
                opacity: 0.3;
            }

            50% {
                opacity: 1;
            }
        }

        .content {
            position: relative;
            z-index: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            padding: 20px;
        }

        h1 {
            font-size: 3rem;
            text-align: center;
            margin-bottom: 50px;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.7);
            letter-spacing: 2px;
        }

        .bubbles-container {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 30px;
            max-width: 1000px;
        }

        .era-btn {
            position: relative;
            width: 180px;
            height: 180px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-weight: bold;
            font-size: 1.2rem;
            text-align: center;
            transition: all 0.5s ease;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
            animation: float 6s ease-in-out infinite;
            text-shadow: 0 0 5px rgba(0, 0, 0, 0.7);
        }

        .era-btn:after {
            content: '';
            position: absolute;
            top: 10%;
            left: 15%;
            width: 30%;
            height: 30%;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            filter: blur(5px);
        }

        #era-btn1 {
            width: 662.683px;
            height: 101.844px;
            flex-shrink: 0;
            background: radial-gradient(circle at 30% 30%, #ff5e5e, #ff0000);
            animation-delay: 0s;
        }

        #era-btn2 {
            width: 718px;
            height: 139.649px;
            flex-shrink: 0;
            background: radial-gradient(circle at 30% 30%, #5e8eff, #004cff);
            animation-delay: 1s;
        }

        #era-btn3 {
            background: radial-gradient(circle at 30% 30%, #5eff7e, #009222);
            animation-delay: 2s;
        }

        #era-btn4 {
            width: 690px;
            height: 134.203px;
            flex-shrink: 0;
            background: radial-gradient(circle at 30% 30%, #ffff5e, #ffea00);
            color: #000;
            animation-delay: 3s;

        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0) scale(1);
            }

            50% {
                transform: translateY(-20px) scale(1.05);
            }
        }

        .era-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 0 30px rgba(255, 255, 255, 0.5);
        }

        /* Sidebar styles */
        .sidebar {
            position: fixed;
            top: 0;
            right: -500px;
            width: 450px;
            height: 100%;
            background: rgba(10, 10, 30, 0.9);
            backdrop-filter: blur(10px);
            border-left: 2px solid rgba(255, 255, 255, 0.2);
            padding: 30px;
            transition: right 0.5s ease;
            overflow-y: auto;
            z-index: 10;
            box-shadow: -5px 0 20px rgba(0, 0, 0, 0.5);
        }

        .sidebar.active {
            right: 0;
        }

        .sidebar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            padding-bottom: 15px;
        }

        .sidebar-title {
            font-size: 1.8rem;
            color: #fff;
        }

        .close-btn {
            background: none;
            border: none;
            color: #fff;
            font-size: 1.5rem;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .close-btn:hover {
            transform: scale(1.2);
        }

        .era-info {
            margin-bottom: 30px;
        }

        .era-info h3 {
            margin-bottom: 15px;
            color: #fff;
            font-size: 1.4rem;
        }

        .era-info p {
            margin-bottom: 15px;
            line-height: 1.6;
            color: rgba(255, 255, 255, 0.8);
        }

        .era-info ul {
            margin-left: 20px;
            margin-bottom: 15px;
        }

        .era-info li {
            margin-bottom: 8px;
            color: rgba(255, 255, 255, 0.8);
        }

        .continue-btn {
            display: block;
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #00c6ff, #0072ff);
            color: white;
            border: none;
            border-radius: 30px;
            font-family: 'Orbitron', sans-serif;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
            text-align: center;
            text-transform: uppercase;
            letter-spacing: 2px;
            box-shadow: 0 0 15px rgba(0, 114, 255, 0.5);
        }

        .continue-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 20px rgba(0, 114, 255, 0.7);
        }

        /* Overlay when sidebar is active */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 5;
            display: none;
        }

        .overlay.active {
            display: block;
        }
    </style>
</head>

<body>
    <!-- Ethereal space background -->
    <div class="space-background">
        <div class="stars" id="stars"></div>
        <div class="nebula"></div>
    </div>

    <div class="content">
        <h1>Choose Your Gameshow Era!</h1>
        <!-- keep era-btn as a class and then use the id's to edit the individual html's -->
        <div class="bubbles-container">
            <button class="era-btn" data-era="radioEra" id="era-btn1"> ------ 30s-50s ------ (Radio Era)</button>
            <button class="era-btn" data-era="discoEra" id="era-btn2"> --- 60s-70s --- (Disco Era)</button>
            <!-- <button class="era-btn" data-era="eightiesEra" id="era-btn3">70s</button> -->
            <button class="era-btn" data-era="presentEra" id="era-btn4"> -- 80s-2010s -- (Present Era)</button>
        </div>
    </div>
    <!-- Sidebar for era information -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h2 class="sidebar-title" id="sidebar-title">Era Information</h2>
            <button class="close-btn" id="close-sidebar">Ã—</button>
        </div>

        <div class="era-info" id="era-info">
            <!-- Content will be dynamically inserted here -->
        </div>

        <button class="continue-btn" id="continue-btn">Continue</button>
    </div>

    <!-- Overlay for when sidebar is active -->
    <div class="overlay" id="overlay"></div>
    <script>
        document.querySelectorAll('.era-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                let selectedEra = e.target.dataset.era;

                // Save selected era to sessionStorage
                sessionStorage.setItem('selectedEra', selectedEra);
                // Send selected era to server
                fetch('/setSelectedEra', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ era: selectedEra }),
                })
                    .then(response => response.json())
                    .then(data => {
                        console.log('Success:', data);
                        // Redirect to game page after successful update
                        window.location.href = 'quizPage_copy.html';
                    })
                    .catch((error) => {
                        console.error('Error:', error);
                        // Redirect even if there's an error
                        window.location.href = 'quizPage_copy.html';
                    });
            });
        });

        // WebSocket connection for Arduino input on eraChoice.html
        const wsEra = new WebSocket('ws://localhost:3000');
        wsEra.onopen = () => {
            console.log('WebSocket connection for eraChoice opened.');
        };

        wsEra.onmessage = (event) => {
            const message = event.data;
            console.log(`Received WebSocket message on eraChoice.html: "${message}"`);

            // Expected Arduino message format: "Button X pressed" where X is A, B, C, or D
            const match = message.match(/Button\s+([A-D])\s+pressed/i);
            if (match && match[1]) {
                const letter = match[1].toUpperCase();
                // Map the letter to the corresponding era button ID:
                // Button A -> era-btn1, Button B -> era-btn2, Button C -> era-btn3, Button D -> era-btn4.
                let buttonId;
                switch (letter) {
                    case 'A':
                        buttonId = 'era-btn1';
                        break;
                    case 'B':
                        buttonId = 'era-btn2';
                        break;
                    case 'C':
                        buttonId = 'era-btn4';
                        break;
                    case 'D':
                        buttonId = 'era-btn4';
                        break;
                }
                if (buttonId) {
                    const button = document.getElementById(buttonId);
                    if (button) {
                        console.log(`Mapping "${message}" to button ID "${buttonId}".`);
                        button.click();
                    } else {
                        console.log(`Button with ID "${buttonId}" not found.`);
                    }
                }
            } else {
                console.log('Message did not match expected era button pattern.');
            }
        };

        wsEra.onerror = (error) => {
            console.error('WebSocket error on eraChoice.html:', error);
        };
        // Close sidebar button
        document.getElementById('close-sidebar').addEventListener('click', function () {
            closeSidebar();
        });

        // Overlay click to close sidebar
        document.getElementById('overlay').addEventListener('click', function () {
            closeSidebar();
        });

        // Continue button
        document.getElementById('continue-btn').addEventListener('click', function () {
            const selectedEra = sessionStorage.getItem('currentEraSelection');
            if (selectedEra) {
                // Save to sessionStorage
                sessionStorage.setItem('selectedEra', selectedEra);

                // Also send to server
                fetch('/setSelectedEra', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ era: selectedEra }),
                })
                    .then(response => response.json())
                    .then(data => {
                        console.log('Success:', data);
                        // Redirect to game page after successful server update
                        window.location.href = 'quizShow_copy.html';
                    })
                    .catch((error) => {
                        console.error('Error:', error);
                        // Still redirect even if there's an error
                       // window.location.href = 'gamepage.html';
                    });
            }
        });

        // Show sidebar with era information
        function showSidebar(era) {
            // Get era information
            const info = eraInfo[era];
            if (!info) return;

            // Update sidebar title
            document.getElementById('sidebar-title').textContent = info.title;

            // Build HTML content for era information
            let html = `
                <p>${info.description}</p>
                
                <h3>Featured Shows</h3>
                <ul>
                    ${info.shows.map(show => `<li>${show}</li>`).join('')}
                </ul>
                
                <h3>Interesting Facts</h3>
                <ul>
                    ${info.facts.map(fact => `<li>${fact}</li>`).join('')}
                </ul>
                
                <h3>Subjects Covered</h3>
                <ul>
                    ${info.subjects.map(subject => `<li>${subject}</li>`).join('')}
                </ul>
            `;

            // Insert HTML into sidebar
            document.getElementById('era-info').innerHTML = html;

            // Show sidebar and overlay
            document.getElementById('sidebar').classList.add('active');
            document.getElementById('overlay').classList.add('active');
        }

        // Close sidebar
        function closeSidebar() {
            document.getElementById('sidebar').classList.remove('active');
            document.getElementById('overlay').classList.remove('active');
        };
        // Generate stars for the background
        function generateStars() {
            const stars = document.getElementById('stars');
            const count = 200;

            for (let i = 0; i < count; i++) {
                const star = document.createElement('div');
                star.className = 'star';

                // Random position
                const x = Math.random() * 100;
                const y = Math.random() * 100;

                // Random size
                const size = Math.random() * 3;

                // Random animation delay
                const delay = Math.random() * 5;

                star.style.left = `${x}%`;
                star.style.top = `${y}%`;
                star.style.width = `${size}px`;
                star.style.height = `${size}px`;
                star.style.animationDelay = `${delay}s`;

                stars.appendChild(star);
            }
        }

        // Era information content
        const eraInfo = {
            radioEra: {
                title: "Radio Era (1920s-1950s)",
                description: "The golden age of radio broadcasting that shaped modern entertainment and music distribution.",
                shows: [
                    "The Grand Ole Opry",
                    "Your Hit Parade",
                    "The National Barn Dance",
                    "Arthur Godfrey's Talent Scouts"
                ],
                facts: [
                    "Radio became the first mass electronic medium, reaching millions of homes simultaneously",
                    "Artists like Frank Sinatra, Bing Crosby, and Ella Fitzgerald rose to fame during this era",
                    "The first commercial radio station, KDKA, began broadcasting in 1920",
                    "Radio dramas like 'War of the Worlds' created nationwide sensations"
                ],
                subjects: [
                    "Big Band & Swing",
                    "Early Country & Western",
                    "Jazz & Blues pioneers",
                    "Early Rock & Roll foundations"
                ]
            },
            seventiesEra: {
                title: "The 60s Era",
                description: "A revolutionary decade that transformed music, culture, and society with new sounds and messages.",
                shows: [
                    "American Bandstand",
                    "The Ed Sullivan Show",
                    "Shindig!",
                    "Hullabaloo"
                ],
                facts: [
                    "The British Invasion led by The Beatles changed American music forever",
                    "Woodstock (1969) became the defining music festival of the generation",
                    "Motown Records created the 'Motown Sound' that crossed racial barriers",
                    "Psychedelic rock emerged alongside the counterculture movement"
                ],
                subjects: [
                    "Folk & Protest Music",
                    "British Invasion Bands",
                    "Motown & Soul",
                    "Psychedelic Rock"
                ]
            },
            eightiesEra: {
                title: "The 70s Era",
                description: "The decade of musical experimentation, disco, and the rise of album-oriented rock.",
                shows: [
                    "Soul Train",
                    "Don Kirshner's Rock Concert",
                    "The Midnight Special",
                    "Top of the Pops"
                ],
                facts: [
                    "Disco dominated the charts and nightlife, especially after 'Saturday Night Fever'",
                    "Progressive rock bands created complex, conceptual albums",
                    "Punk rock emerged as a reaction against mainstream music",
                    "The Singer-songwriter movement brought introspective lyrics to popular music"
                ],
                subjects: [
                    "Disco & Dance Music",
                    "Progressive & Art Rock",
                    "Early Punk & New Wave",
                    "Singer-Songwriters"
                ]
            },
            modernEra: {
                title: "Modern Era (80s-2010s)",
                description: "From MTV to streaming services, this era saw rapid technological changes in how music is created and consumed.",
                shows: [
                    "MTV Video Music Awards",
                    "American Idol",
                    "The Voice",
                    "Saturday Night Live musical performances"
                ],
                facts: [
                    "MTV launched in 1981, making music videos essential for artists' success",
                    "Hip-hop evolved from underground movement to global cultural force",
                    "Digital technology transformed production, distribution, and consumption of music",
                    "The internet and streaming services revolutionized how people discover music"
                ],
                subjects: [
                    "80s New Wave & Synthpop",
                    "90s Grunge & Alternative",
                    "Hip-Hop Evolution",
                    "2000s Pop & Electronic Music"
                ]
            }
        };
    </script>
</body>

</html>