<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Player Buttons Menu</title>
    <style>
        body {
            background-color: #2c2c2c;
            display: flex;
            flex-direction: column;
            gap: 30px;
            padding: 40px;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            font-family: 'Arial', sans-serif;
        }

        .menu-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 30px;
            width: 100%;
            max-width: 1200px;
        }

        .menu-section {
            display: flex;
            flex-direction: column;
            gap: 20px;
            padding: 20px;
            border-radius: 15px;
        }

        .difficulty-section {
            background: linear-gradient(145deg, #4CAF50, #1b5e20);

        }

        .time-section {
            background: linear-gradient(145deg, #ff4444, #cc0000);
        }

        .other-section {
            background: linear-gradient(145deg, #2196F3, #0d47a1);
        }

        button {
            border-radius: 50%;
            border: none;
            cursor: pointer;
            position: relative;
            transition: transform 0.1s;
            color: white;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
            box-shadow:
                0 10px 0 rgba(0, 0, 0, 0.3),
                0 0 20px rgba(0, 0, 0, 0.5);
        }

        button:active {
            transform: translateY(8px);
            box-shadow:
                0 2px 0 rgba(0, 0, 0, 0.3),
                0 0 10px rgba(0, 0, 0, 0.5);
        }

        .difficulty-buttons {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .time-era-buttons {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;

        }

        .time-era-button {
            width: 140px;
            height: 140px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            background: linear-gradient(145deg, #ff9800, #f57c00);
            font-weight: bolder;
        }

        .time-era-button img {
            width: 60px;
            height: 60px;
            object-fit: contain;
            margin-bottom: 10px;
        }

        .answer-buttons {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 30px;
        }

        .answer-button {
            width: 140px;
            height: 140px;
            font-size: 32px;
            font-weight: bolder;
        }

        #A {
            background: linear-gradient(145deg, #ff4444, #cc0000);
        }

        #B {
            background: linear-gradient(145deg, #2196F3, #0d47a1);
        }

        #C {
            background: linear-gradient(145deg, #4CAF50, #1b5e20);
        }

        #D {
            background: linear-gradient(145deg, #b0ae27, #fffc64);
        }

        #ez {
            background: linear-gradient(145deg, #95ff44, #00cc03);
            font-weight: bolder;
            color: #2c2c2c;
            padding: 3px;
        }

        #mdm {
            background: linear-gradient(145deg, #f6ff44, #ccc900);
            font-weight: bolder;
            color: #2c2c2c;
            padding: 3px;
        }

        #hrd {
            background: linear-gradient(145deg, #ff4444, #cc0000);
            font-weight: bolder;
            color: #2c2c2c;
            padding: 3px;
        }

        .PhoneButt {
            background: linear-gradient(145deg, #0083ff, #0000ff);
            color: white;
            font-weight: bolder;
            padding: 10px 20px;
            border-radius: 50%;
            width: 300px;
            height: 300px;
        }

        button.active {
            transform: translateY(8px);
            box-shadow: 0 2px 0 rgba(0, 0, 0, 0.3), 0 0 10px rgba(0, 0, 0, 0.5);
        }
    </style>
</head>

<body>
    <div class="menu-grid">
        <div class="menu-section difficulty-section">
            <h2>Difficulty</h2>
            <div class="difficulty-buttons">
                <button class="answer-button" id='ez'>EASY</button>
                <button class="answer-button" id='mdm'>MEDIUM</button>
                <button class="answer-button" id='hrd'>HARD</button>
            </div>
        </div>

        <div class="menu-section time-section">
            <h2>Time Eras</h2>
            <div class="time-era-buttons">
                <button class="time-era-button">
                    <!-- <img src="./assets/radio.png" alt="Radio"> -->
                    Radio
                </button>
                <button class="time-era-button">
                    <!-- <img src="./assets/60s.png" alt="60s"> -->
                    60s
                </button>
                <button class="time-era-button">
                    <!-- <img src="./assets/70s.png" alt="70s"> -->
                    70s
                </button>
                <button class="time-era-button">
                    <!-- <img src="./assets/80s-90s.png" alt="80s-90s"> -->
                    80s-90s
                </button>
                <button class="time-era-button">
                    <!-- <img src="./assets/current.png" alt="Current"> -->
                    Current
                </button>
            </div>
        </div>

        <div class="menu-section other-section">
            <h2>Actions</h2>
            <div class="answer-buttons">
                <button id="A" class="answer-button">A</button>
                <button id="B" class="answer-button">B</button>
                <button id="C" class="answer-button">C</button>
                <button id="D" class="answer-button">D</button>
            </div>
            <button class="PhoneButt">
                Phone a Friend
                <img src="./assets/phone-ringing.png" alt="Phone" class="PhoneButt">
            </button>
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const buttons = {
                'A': document.getElementById('A'),
                'B': document.getElementById('B'),
                'C': document.getElementById('C'),
                'D': document.getElementById('D'),
            };

            function pressButton(letter) {
                const button = buttons[letter];
                if (button) {
                    button.classList.add('active');
                    button.click();
                    setTimeout(() => button.classList.remove('active'), 200);
                }
            }

            async function connectSerial() {
                try {
                    const port = await navigator.serial.requestPort();
                    await port.open({ baudRate: 9600 });

                    const decoder = new TextDecoderStream('utf-8');
                    const readableStreamClosed = port.readable.pipeTo(decoder.writable);
                    const reader = decoder.readable.getReader();

                    console.log('Serial connected.');

                    while (true) {
                        const { value, done } = await reader.read();
                        if (done) {
                            console.log('Reader closed.');
                            break;
                        }
                        if (value) {
                            const letter = value.trim().toUpperCase();
                            console.log('Received:', letter); // Debug output
                            if (buttons[letter]) {
                                pressButton(letter);
                            }
                        }
                    }

                    await readableStreamClosed.catch(() => { console.log('Stream closed.'); });
                } catch (err) {
                    console.error('Serial connection error:', err);
                    alert('Serial connection failed. Make sure you selected the correct port.');
                }
            }

            const connectBtn = document.createElement('button');
            connectBtn.textContent = 'Connect Arduino';
            connectBtn.style.cssText = 'position:fixed;top:10px;right:10px;padding:10px;';
            connectBtn.addEventListener('click', connectSerial);
            document.body.appendChild(connectBtn);
        });
    </script>

</body>

</html>